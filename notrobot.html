<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Car CAPTCHA</title>
  <link rel="stylesheet" href="./style/notrobot.css">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
</head>
<body>

<h2>Valitse kaikki kuvat joissa esiintyy auto</h2>
<div class="grid" id="captchaGrid"></div>
<button onclick="verifySelection()">Verify</button>
<p id="result"></p>

<script>
  const images = [
    { src: 'images/notrobot/car1.jpg', isCar: true },
    { src: 'images/notrobot/isitornot.jpg', isCar: false },
    { src: 'images/notrobot/car2.jpg', isCar: true },
    { src: 'images/notrobot/isitornot1.jpg', isCar: false },
    { src: 'images/notrobot/car3.jpg', isCar: true },
    { src: 'images/notrobot/maybecar1.jpg', isCar: true },
    { src: 'images/notrobot/maybecar2.jpg', isCar: false },
    { src: 'images/notrobot/maybecar3.jpg', isCar: false },
    { src: 'images/notrobot/maybecar4.jpg', isCar: false}
  ];

  const grid = document.getElementById('captchaGrid');

  images.forEach((img, index) => {
    const imageElement = document.createElement('img');
    imageElement.src = img.src;
    imageElement.dataset.index = index;
    imageElement.onclick = () => {
      imageElement.classList.toggle('selected');
    };
    grid.appendChild(imageElement);
  });

  function verifySelection() {
    const selected = document.querySelectorAll('.grid img.selected');
    const selectedIndexes = Array.from(selected).map(img => parseInt(img.dataset.index));
    const correctIndexes = images
      .map((img, i) => img.isCar ? i : null)
      .filter(i => i !== null);

    const isCorrect = selectedIndexes.length === correctIndexes.length &&
                      selectedIndexes.every(i => correctIndexes.includes(i));

    document.getElementById('result').textContent = isCorrect
      ? '✅ Correct!'
      : '❌ Try again.';
  }
</script>

</body>
